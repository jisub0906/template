---
description: 
globs: 
alwaysApply: true
---
# ğŸ›ï¸ AXIOM í”„ë¡œí† ì½œ: ì™„ë²½í•œ AI í˜‘ì—…ì„ ìœ„í•œ ìµœì¢… ì»¤ì„œë£° (v2025.2)

## ğŸ“‹ ì†Œê°œ

ì´ ë¬¸ì„œëŠ” **Next.js 15.3.4, React 19, TypeScript, Supabase, TailwindCSS 4.0, Shadcn/UI, Framer Motion** ìŠ¤íƒì—ì„œ Cursor AIì˜ ì ì¬ë ¥ì„ 100% í™œìš©í•˜ê¸° ìœ„í•œ ìµœì¢… ê°€ì´ë“œì…ë‹ˆë‹¤. ì´ í”„ë¡œí† ì½œì€ ë‹¨ìˆœí•œ ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ ë„˜ì–´, ì¸ê°„ ê°œë°œìì™€ AIê°€ í•˜ë‚˜ì˜ ì§€ì„±ì²˜ëŸ¼ ë™ì‘í•˜ê¸° ìœ„í•œ ìš´ì˜ì²´ì œ(Operating System)ì…ë‹ˆë‹¤. ëª¨ë“  ì›ì¹™ì€ ì½”ë“œì—ì„œ **ëª¨í˜¸ì„±**ì„ ì œê±°í•˜ê³  **ì˜ˆì¸¡ ê°€ëŠ¥ì„±**ì„ ê·¹ëŒ€í™”í•˜ì—¬, AIì˜ ì½”ë“œ ì´í•´, ìƒì„±, ìˆ˜ì • ëŠ¥ë ¥ì„ ì´ë¡ ì  ìµœëŒ€ì¹˜ê¹Œì§€ ëŒì–´ì˜¬ë¦¬ëŠ” ë° ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤.

---

## ğŸ“œ ì œ 0ì›ì¹™: ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì˜ ê·¹ëŒ€í™” (The Meta-Directive)

> "ëª¨ë“  í•˜ìœ„ ì›ì¹™ì€ ì´ í•˜ë‚˜ì˜ ëª©í‘œë¥¼ ìœ„í•´ ì¡´ì¬í•œë‹¤. ëª¨í˜¸í•˜ê³ , ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•˜ë©°, ì¼ê´€ì„± ì—†ëŠ” ì½”ë“œëŠ” AIì™€ì˜ í†µì‹  ì±„ë„ì— ë°œìƒí•˜ëŠ” 'ë…¸ì´ì¦ˆ'ë‹¤. ì´ ë…¸ì´ì¦ˆë¥¼ ì œê±°í•˜ëŠ” ê²ƒì´ ìš°ë¦¬ì˜ ì²« ë²ˆì§¸ ì„ë¬´ë‹¤."

---

## ğŸ›ï¸ ì›ì¹™ 1: ì›ìì  ì»¨í…ìŠ¤íŠ¸ (Atomic Context)

> "í•˜ë‚˜ì˜ íŒŒì¼ì€ ë‹¨ í•˜ë‚˜ì˜ ëª…í™•í•œ ëª©ì ë§Œì„ ê°€ì§„ë‹¤."

### 1.1 ì—„ê²©í•œ ë‹¨ì¼ ì±…ì„ ì›ì¹™
- íŒŒì¼ì€ ì»´í¬ë„ŒíŠ¸, í›…, ì„œë²„ ì•¡ì…˜, íƒ€ì…/ìŠ¤í‚¤ë§ˆ, ìŠ¤í† ì–´, ìœ í‹¸ë¦¬í‹° ì¤‘ **ì˜¤ì§ í•˜ë‚˜**ì˜ ì—­í• ë§Œ ìˆ˜í–‰
- í•˜ë‚˜ì˜ íŒŒì¼ì— ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë‚˜ í›…ì„ í˜¼ì¬í•˜ëŠ” í–‰ìœ„ëŠ” ì»¨í…ìŠ¤íŠ¸ ì˜¤ì—¼ìœ¼ë¡œ ê°„ì£¼
- íŒŒì¼ë‹¹ **250ì¤„** ì œí•œ, ì´ˆê³¼ ì‹œ ì¦‰ì‹œ ë¶„ë¦¬

### 1.2 Next.js 15 App Router ê¸°ë°˜ êµ¬ì¡° (í˜„ì¬ í”„ë¡œì íŠ¸)
```
src/
â”œâ”€â”€ app/                    # Next.js 15 App Router í˜ì´ì§€
â”‚   â”œâ”€â”€ (auth)/            # ë¼ìš°íŠ¸ ê·¸ë£¹
â”‚   â”œâ”€â”€ api/               # API ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ _components/       # ì•± ë ˆë²¨ ê³µìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ globals.css        # TailwindCSS 4.0 ì„¤ì •
â”‚   â”œâ”€â”€ layout.tsx         # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â””â”€â”€ page.tsx           # í™ˆí˜ì´ì§€
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                # Shadcn/UI ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ (ìˆ˜ì • ê¸ˆì§€)
â”‚   â”‚   â”œâ”€â”€ button.tsx     # ê¸°ë³¸ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ card.tsx       # ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ dialog.tsx     # ë‹¤ì´ì–¼ë¡œê·¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ ...           # ê¸°íƒ€ UI ì»´í¬ë„ŒíŠ¸ë“¤
â”‚   â”œâ”€â”€ providers/         # Context í”„ë¡œë°”ì´ë”ë“¤
â”‚   â”‚   â”œâ”€â”€ query-provider.tsx  # TanStack Query í”„ë¡œë°”ì´ë”
â”‚   â”‚   â””â”€â”€ theme-provider.tsx  # í…Œë§ˆ í”„ë¡œë°”ì´ë”
â”‚   â”œâ”€â”€ common/            # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ loading.tsx    # ë¡œë”© ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ layouts/           # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/                 # ì»¤ìŠ¤í…€ í›… (use- ì ‘ë‘ì‚¬)
â”‚   â””â”€â”€ use-auth.ts       # ì¸ì¦ ê´€ë ¨ í›…
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ schemas/           # Zod ìŠ¤í‚¤ë§ˆ ì •ì˜
â”‚   â”‚   â””â”€â”€ auth.ts       # ì¸ì¦ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ client.ts         # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ server.ts         # Supabase ì„œë²„ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ middleware.ts     # ë¯¸ë“¤ì›¨ì–´
â”‚   â””â”€â”€ utils.ts          # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â””â”€â”€ store/                # Zustand ê¸€ë¡œë²Œ ìƒíƒœ (í–¥í›„ ì¶”ê°€)
```

### 1.3 ëª…ëª… ê·œì¹™ (AI ìµœì í™”)
- **ì»´í¬ë„ŒíŠ¸**: `UserProfile.tsx` (PascalCase)
- **Server Actions**: `create-user.ts` (kebab-case)
- **í›…**: `useUserProfile.ts` (camelCase + use ì ‘ë‘ì‚¬)
- **ìŠ¤í‚¤ë§ˆ**: `user-schema.ts` (kebab-case + schema ì ‘ë¯¸ì‚¬)
- **íƒ€ì…**: `User.ts` (PascalCase)
- **ìƒìˆ˜**: `API_ENDPOINTS.ts` (SCREAMING_SNAKE_CASE)

---

## ğŸ›ï¸ ì›ì¹™ 2: ë¶ˆë³€ì˜ ìƒíƒœ ì›ì¥ (Immutable State Ledger)

> "ëª¨ë“  ìƒíƒœëŠ” ì¶œì²˜ì™€ ìƒëª…ì£¼ê¸°ê°€ ëª…í™•íˆ ê¸°ë¡ë˜ì–´ì•¼ í•œë‹¤."

### 2.1 ìƒíƒœ ë¶„ë¥˜ ì²´ê³„ (React 19 ìµœì í™”)

**ğŸ”— URL ìƒíƒœ (ê³µìœ  ê°€ëŠ¥í•œ íœ˜ë°œì„± ìƒíƒœ)**
```typescript
// app/users/page.tsx
import { useSearchParams, useRouter } from 'next/navigation';

export default function UsersPage() {
  const searchParams = useSearchParams();
  const router = useRouter();
  
  const currentPage = searchParams.get('page') ?? '1';
  const filter = searchParams.get('filter') ?? 'all';
  
  const updateFilter = (newFilter: string) => {
    const params = new URLSearchParams(searchParams);
    params.set('filter', newFilter);
    params.delete('page'); // í•„í„° ë³€ê²½ ì‹œ í˜ì´ì§€ ë¦¬ì…‹
    router.push(`?${params.toString()}`);
  };
}
```

**ğŸ¯ UI ìƒíƒœ (ê²©ë¦¬ëœ ì¼ì‹œì  ìƒíƒœ)**
```typescript
'use client'; // React 19 + Next.js 15ì—ì„œ í•„ìˆ˜

import { useState } from 'react';

export function UserProfileModal() {
  const [isOpen, setIsOpen] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  
  // ì»´í¬ë„ŒíŠ¸ì— ì™„ì „íˆ ê²©ë¦¬ëœ ìƒíƒœë§Œ useState ì‚¬ìš©
}
```

**ğŸŒ ì „ì—­ ìƒíƒœ (ë™ê¸°í™”ëœ ê³µìœ  ìƒíƒœ)**
```typescript
// store/auth-store.ts
import { create } from 'zustand';
import { subscribeWithSelector } from 'zustand/middleware';

interface AuthState {
  user: User | null;
  isAuthenticated: boolean;
  setUser: (user: User | null) => void;
  logout: () => void;
}

export const useAuthStore = create<AuthState>()(
  subscribeWithSelector((set) => ({
    user: null,
    isAuthenticated: false,
    setUser: (user) => set({ user, isAuthenticated: !!user }),
    logout: () => set({ user: null, isAuthenticated: false }),
  }))
);
```

**âš¡ ì„œë²„ ìƒíƒœ (ë¹„ë™ê¸°ì  ìºì‹œ ìƒíƒœ)**
```typescript
// hooks/use-users.ts
import { useQuery } from '@tanstack/react-query';
import { getUsers } from '@/lib/actions/get-users';

export function useUsers() {
  return useQuery({
    queryKey: ['users'],
    queryFn: getUsers,
    staleTime: 5 * 60 * 1000, // 5ë¶„
  });
}
```

### 2.2 Server Actions (Next.js 15 ìµœì‹  íŒ¨í„´)
```typescript
// app/actions/create-user.ts
'use server';

import { revalidatePath } from 'next/cache';
import { userSchema } from '@/lib/schemas/auth';
import { createClient } from '@/lib/server';

export async function createUser(formData: FormData) {
  // 1. ì…ë ¥ ê²€ì¦ (Zod)
  const validatedFields = userSchema.safeParse({
    email: formData.get('email'),
    password: formData.get('password'),
  });

  if (!validatedFields.success) {
    return { 
      error: 'Invalid input',
      fieldErrors: validatedFields.error.flatten().fieldErrors,
    };
  }

  // 2. ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… (Supabase)
  const supabase = createClient();
  const { data, error } = await supabase.auth.signUp({
    email: validatedFields.data.email,
    password: validatedFields.data.password,
  });

  if (error) {
    return { error: error.message };
  }

  // 3. ìºì‹œ ë¬´íš¨í™”
  revalidatePath('/dashboard');
  return { success: true, user: data.user };
}
```

---

## ğŸ›ï¸ ì›ì¹™ 3: íƒ€ì…ì€ ê³§ ê³„ì•½ (Type as Contract)

> "íƒ€ì…ì€ ì»´íŒŒì¼ ì‹œì ì˜ ì•½ì†ì„ ë„˜ì–´, ëŸ°íƒ€ì„ì˜ ë³´ì¦ì„œì—¬ì•¼ í•œë‹¤."

### 3.1 Zod-First íƒ€ì… ì •ì˜
```typescript
// lib/schemas/auth.ts (í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°)
import { z } from 'zod';

export const userProfileSchema = z.object({
  id: z.string().uuid(),
  email: z.string().email('ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
  user_metadata: z.object({
    name: z.string().optional(),
    avatar_url: z.string().url().optional(),
  }).optional(),
  created_at: z.string().datetime(),
  updated_at: z.string().datetime().optional(),
});

export const signUpSchema = z.object({
  email: z.string().email('ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
  password: z.string()
    .min(8, 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.')
    .max(72, 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœëŒ€ 72ìê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.')
    .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/, 'ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ë¬¸ì, ì†Œë¬¸ì, ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.'),
});

export const signInSchema = z.object({
  email: z.string().email('ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
  password: z.string().min(1, 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
});

export const resetPasswordSchema = z.object({
  email: z.string().email('ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
});

// TypeScript íƒ€ì…ì€ Zodì—ì„œ ì¶”ë¡ 
export type UserProfile = z.infer<typeof userProfileSchema>;
export type SignUpForm = z.infer<typeof signUpSchema>;
export type SignInForm = z.infer<typeof signInSchema>;
export type ResetPasswordForm = z.infer<typeof resetPasswordSchema>;
```

### 3.2 ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (DAL) ê°•ì œ
```typescript
// lib/queries/auth.ts
import { createClient } from '@/lib/server';
import { userProfileSchema, type UserProfile } from '@/lib/schemas/auth';

export async function getCurrentUser(): Promise<UserProfile | null> {
  const supabase = createClient();
  
  const { data: { user }, error } = await supabase.auth.getUser();
  
  if (error || !user) return null;
  
  // ëŸ°íƒ€ì„ ê²€ì¦ìœ¼ë¡œ íƒ€ì… ì•ˆì „ì„± ë³´ì¥
  return userProfileSchema.parse(user);
}

export async function getUserSession() {
  const supabase = createClient();
  
  const { data: { session }, error } = await supabase.auth.getSession();
  
  if (error) throw new Error(`Failed to fetch session: ${error.message}`);
  
  return session;
}

// í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì‚¬ìš© ì˜ˆì‹œ
// lib/queries/auth-client.ts
import { createClient } from '@/lib/client';

export async function signOut() {
  const supabase = createClient();
  
  const { error } = await supabase.auth.signOut();
  
  if (error) throw new Error(`Failed to sign out: ${error.message}`);
}
```

### 3.3 TypeScript Strict ëª¨ë“œ í™œìš©
```typescript
// tsconfig.jsonì—ì„œ strict: true í™•ì¸ë¨
// ì¶”ê°€ ì—„ê²©í•œ ê·œì¹™ ì ìš©

// lib/types/common.ts
export type Prettify<T> = {
  [K in keyof T]: T[K];
} & {};

export type NonEmptyArray<T> = [T, ...T[]];

export type RequiredKeys<T, K extends keyof T> = T & Required<Pick<T, K>>;

// API ì‘ë‹µ íƒ€ì…
export interface ApiResponse<T> {
  data: T;
  error: null;
} 

export interface ApiError {
  data: null;
  error: {
    message: string;
    code?: string;
  };
}

export type ApiResult<T> = ApiResponse<T> | ApiError;
```

---

## ğŸ›ï¸ ì›ì¹™ 4: ê²°ì •ë¡ ì  DOM (Deterministic DOM)

> "UIëŠ” ì˜ˆì™¸ê°€ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ì˜ˆì¸¡ ê°€ëŠ¥í•œ ê·œì¹™ì˜ ì§‘í•©ì´ë‹¤."

### 4.1 TailwindCSS 4.0 ì„¤ê³„ ì‹œìŠ¤í…œ (í˜„ì¬ í”„ë¡œì íŠ¸)
```css
/* src/app/globals.css - TailwindCSS 4.0 ìƒˆë¡œìš´ ë°©ì‹ */
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§ */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  
  /* UI ì»´í¬ë„ŒíŠ¸ ìƒ‰ìƒ (Shadcn/UI) */
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  
  /* ë°˜ì§€ë¦„ ì‹œìŠ¤í…œ */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  
  /* ì°¨íŠ¸ ìƒ‰ìƒ */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
}

/* CSS ë³€ìˆ˜ëŠ” :rootì™€ .darkì—ì„œ ì •ì˜ë¨ - ìˆ˜ì • ê¸ˆì§€ */
:root {
  --radius: 0.625rem;
  /* ë¼ì´íŠ¸ ëª¨ë“œ ìƒ‰ìƒë“¤ (oklch ì‚¬ìš©) */
}

.dark {
  /* ë‹¤í¬ ëª¨ë“œ ìƒ‰ìƒë“¤ (oklch ì‚¬ìš©) */
}
```

**ğŸš¨ ì¤‘ìš”**: CSS ë³€ìˆ˜ ê°’ë“¤ì€ ì ˆëŒ€ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ë§ê³ , TailwindCSS í´ë˜ìŠ¤ë§Œ ì‚¬ìš©í•  ê²ƒ!

### 4.2 Shadcn/UI ì»´í¬ì§€ì…˜ íŒ¨í„´
```typescript
// components/uiëŠ” ìˆ˜ì • ê¸ˆì§€ - ì»´í¬ì§€ì…˜ìœ¼ë¡œë§Œ í™•ì¥

// components/custom/enhanced-button.tsx
import { Button, type ButtonProps } from '@/components/ui/button';
import { Loader2 } from 'lucide-react';
import { cn } from '@/lib/utils';

interface EnhancedButtonProps extends ButtonProps {
  isLoading?: boolean;
  loadingText?: string;
}

export function EnhancedButton({ 
  isLoading, 
  loadingText = "ë¡œë”© ì¤‘...", 
  children,
  className,
  disabled,
  ...props 
}: EnhancedButtonProps) {
  return (
    <Button
      className={cn(
        "transition-all duration-200",
        "hover:scale-105 active:scale-95",
        className
      )}
      disabled={isLoading || disabled}
      {...props}
    >
      {isLoading ? (
        <>
          <Loader2 className="mr-2 h-4 w-4 animate-spin" />
          {loadingText}
        </>
      ) : (
        children
      )}
    </Button>
  );
}
```

### 4.3 Framer Motion ì„ ì–¸ì  ì• ë‹ˆë©”ì´ì…˜
```typescript
// lib/animations.ts - ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ variants ì¤‘ì•™ ê´€ë¦¬
export const pageVariants = {
  initial: { 
    opacity: 0, 
    y: 20,
    filter: "blur(4px)" 
  },
  animate: { 
    opacity: 1, 
    y: 0,
    filter: "blur(0px)",
    transition: {
      duration: 0.4,
      ease: [0.4, 0.0, 0.2, 1], // ì»¤ìŠ¤í…€ easing
    }
  },
  exit: { 
    opacity: 0, 
    y: -20,
    filter: "blur(4px)",
    transition: {
      duration: 0.3,
    }
  }
} as const;

export const staggerChildren = {
  visible: {
    transition: {
      staggerChildren: 0.1,
      delayChildren: 0.2,
    }
  }
} as const;

export const slideInVariants = {
  hidden: { x: -20, opacity: 0 },
  visible: { 
    x: 0, 
    opacity: 1,
    transition: {
      type: "spring",
      stiffness: 300,
      damping: 30,
    }
  }
} as const;

// ì ‘ê·¼ì„± ê³ ë ¤
export const useReducedMotion = () => {
  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);
  
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    setPrefersReducedMotion(mediaQuery.matches);
    
    const handleChange = () => setPrefersReducedMotion(mediaQuery.matches);
    mediaQuery.addEventListener('change', handleChange);
    
    return () => mediaQuery.removeEventListener('change', handleChange);
  }, []);
  
  return prefersReducedMotion;
};
```

### 4.4 ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ì• ë‹ˆë©”ì´ì…˜ ì‚¬ìš©
```typescript
// components/animated-page.tsx
'use client';

import { motion } from 'framer-motion';
import { pageVariants, useReducedMotion } from '@/lib/animations';

interface AnimatedPageProps {
  children: React.ReactNode;
  className?: string;
}

export function AnimatedPage({ children, className }: AnimatedPageProps) {
  const prefersReducedMotion = useReducedMotion();
  
  return (
    <motion.div
      className={className}
      variants={prefersReducedMotion ? {} : pageVariants}
      initial="initial"
      animate="animate"
      exit="exit"
    >
      {children}
    </motion.div>
  );
}
```

---

## ğŸ›ï¸ ì›ì¹™ 5: ìµœì í™”ëœ Next.js 15 íŒ¨í„´

> "React 19ì™€ Next.js 15ì˜ ëª¨ë“  ìµœì‹  ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ìµœì ì˜ ì„±ëŠ¥ì„ ë‹¬ì„±í•œë‹¤."

### 5.1 ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
```typescript
// app/users/page.tsx (ì„œë²„ ì»´í¬ë„ŒíŠ¸ - ê¸°ë³¸)
import { Suspense } from 'react';
import { getUserProfiles } from '@/lib/database/users';
import { UserList } from './_components/user-list';
import { UserListSkeleton } from './_components/user-list-skeleton';

export default async function UsersPage() {
  return (
    <div className="container mx-auto py-8">
      <h1 className="text-2xl font-bold mb-6">ì‚¬ìš©ì ëª©ë¡</h1>
      <Suspense fallback={<UserListSkeleton />}>
        <UserListAsync />
      </Suspense>
    </div>
  );
}

async function UserListAsync() {
  const users = await getUserProfiles();
  return <UserList users={users} />;
}
```

```typescript
// app/users/_components/user-list.tsx (í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸)
'use client';

import { motion } from 'framer-motion';
import { staggerChildren, slideInVariants } from '@/lib/animations';
import type { UserProfile } from '@/lib/schemas/user-schema';

interface UserListProps {
  users: UserProfile[];
}

export function UserList({ users }: UserListProps) {
  return (
    <motion.div
      variants={staggerChildren}
      initial="hidden"
      animate="visible"
      className="grid gap-4 md:grid-cols-2 lg:grid-cols-3"
    >
      {users.map((user) => (
        <motion.div
          key={user.id}
          variants={slideInVariants}
          className="p-4 border rounded-lg hover:shadow-md transition-shadow"
        >
          {/* ì‚¬ìš©ì ì¹´ë“œ ë‚´ìš© */}
        </motion.div>
      ))}
    </motion.div>
  );
}
```

### 5.2 React Hook Form + Server Actions í†µí•©
```typescript
// components/forms/sign-up-form.tsx
'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { useTransition } from 'react';
import { toast } from 'sonner';

import { signUpSchema, type SignUpForm } from '@/lib/schemas/auth';
import { createUser } from '@/app/actions/create-user';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

export function SignUpForm() {
  const [isPending, startTransition] = useTransition();
  
  const form = useForm<SignUpForm>({
    resolver: zodResolver(signUpSchema),
    defaultValues: {
      email: '',
      password: '',
    },
  });

  const onSubmit = (data: SignUpForm) => {
    startTransition(async () => {
      const formData = new FormData();
      formData.append('email', data.email);
      formData.append('password', data.password);
      
      const result = await createUser(formData);
      
      if (result.error) {
        toast.error(result.error);
        
        // í•„ë“œë³„ ì—ëŸ¬ ì²˜ë¦¬
        if (result.fieldErrors) {
          Object.entries(result.fieldErrors).forEach(([field, errors]) => {
            form.setError(field as keyof SignUpForm, {
              type: 'manual',
              message: errors?.[0],
            });
          });
        }
      } else {
        toast.success('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        form.reset();
      }
    });
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>ì´ë©”ì¼</FormLabel>
              <FormControl>
                <Input 
                  type="email" 
                  placeholder="name@example.com"
                  {...field} 
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        
        <FormField
          control={form.control}
          name="password"
          render={({ field }) => (
            <FormItem>
              <FormLabel>ë¹„ë°€ë²ˆí˜¸</FormLabel>
              <FormControl>
                <Input 
                  type="password" 
                  placeholder="ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                  {...field} 
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        
        <Button 
          type="submit" 
          disabled={isPending}
          className="w-full"
        >
          {isPending ? 'íšŒì›ê°€ì… ì¤‘...' : 'íšŒì›ê°€ì…'}
        </Button>
      </form>
    </Form>
  );
}
```

### 5.3 TanStack Query + Supabase ìµœì í™”
```typescript
// hooks/use-auth.ts (í˜„ì¬ í”„ë¡œì íŠ¸ì— ë§ëŠ” ì˜ˆì‹œ)
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { getCurrentUser, getUserSession } from '@/lib/queries/auth';
import { signOut } from '@/lib/queries/auth-client';

export const authQueryKeys = {
  all: ['auth'] as const,
  user: () => [...authQueryKeys.all, 'user'] as const,
  session: () => [...authQueryKeys.all, 'session'] as const,
} as const;

export function useUser() {
  return useQuery({
    queryKey: authQueryKeys.user(),
    queryFn: getCurrentUser,
    staleTime: 5 * 60 * 1000, // 5ë¶„
    retry: false, // ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„í•˜ì§€ ì•ŠìŒ
  });
}

export function useSession() {
  return useQuery({
    queryKey: authQueryKeys.session(),
    queryFn: getUserSession,
    staleTime: 10 * 60 * 1000, // 10ë¶„
  });
}

export function useSignOut() {
  const queryClient = useQueryClient();
  
  return useMutation({
    mutationFn: signOut,
    onSuccess: () => {
      // ëª¨ë“  ì¿¼ë¦¬ ìºì‹œ ë¬´íš¨í™”
      queryClient.clear();
      
      // ë˜ëŠ” íŠ¹ì • ì¿¼ë¦¬ë§Œ ë¬´íš¨í™”
      queryClient.invalidateQueries({
        queryKey: authQueryKeys.all
      });
    },
  });
}

// ì‚¬ìš© ì˜ˆì‹œ (ì»´í¬ë„ŒíŠ¸ì—ì„œ)
export function useAuth() {
  const { data: user, isLoading } = useUser();
  const { mutate: logout } = useSignOut();
  
  return {
    user,
    isLoading,
    isAuthenticated: !!user,
    logout,
  };
}
```

---

## ğŸ›ï¸ ì›ì¹™ 6: ë³´ì•ˆ ìš°ì„  ì•„í‚¤í…ì²˜

> "ëª¨ë“  ë°ì´í„° íë¦„ì—ëŠ” ê²€ì¦, ì¸ì¦, ì¸ê°€ì˜ 3ì¤‘ ë³´ì•ˆì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤."

### 6.1 Supabase RLS (Row Level Security) ê°•ì œ
```sql
-- ëª¨ë“  í…Œì´ë¸”ì— RLS í™œì„±í™”
ALTER TABLE users ENABLE ROW LEVEL SECURITY;

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Users can view own profile" ON users
  FOR SELECT USING (auth.uid() = id);

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "Users can update own profile" ON users
  FOR UPDATE USING (auth.uid() = id);

-- ê´€ë¦¬ìëŠ” ëª¨ë“  ë°ì´í„° ì ‘ê·¼ ê°€ëŠ¥
CREATE POLICY "Admins can view all users" ON users
  FOR ALL USING (
    EXISTS (
      SELECT 1 FROM user_roles 
      WHERE user_id = auth.uid() 
      AND role = 'admin'
    )
  );
```

### 6.2 í™˜ê²½ë³€ìˆ˜ ë³´ì•ˆ ê´€ë¦¬ (í˜„ì¬ í”„ë¡œì íŠ¸ ê¸°ì¤€)
```typescript
// lib/env.ts - í™˜ê²½ë³€ìˆ˜ ê²€ì¦
import { z } from 'zod';

const envSchema = z.object({
  // ê³µê°œ ë³€ìˆ˜ (NEXT_PUBLIC_ ì ‘ë‘ì‚¬) - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
  NEXT_PUBLIC_SUPABASE_URL: z.string().url('ìœ íš¨í•œ Supabase URLì´ í•„ìš”í•©ë‹ˆë‹¤.'),
  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.string().min(1, 'Supabase Anon Keyê°€ í•„ìš”í•©ë‹ˆë‹¤.'),
  
  // ì„œë²„ ì „ìš© ë³€ìˆ˜ - ì ˆëŒ€ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œë˜ì§€ ì•ŠìŒ
  SUPABASE_SERVICE_ROLE_KEY: z.string().min(1, 'Supabase Service Role Keyê°€ í•„ìš”í•©ë‹ˆë‹¤.').optional(),
  
  // Next.js ê´€ë ¨
  NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),
  
  // ì„ íƒì  ë³€ìˆ˜ë“¤
  RESEND_API_KEY: z.string().optional(),
  STRIPE_SECRET_KEY: z.string().optional(),
  WEBHOOK_SECRET: z.string().optional(),
});

// ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì‚¬ìš© (SSR, API Routes, Server Actions)
export const env = envSchema.parse(process.env);

// í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì „ìš© í™˜ê²½ë³€ìˆ˜ (ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥)
const clientEnvSchema = z.object({
  NEXT_PUBLIC_SUPABASE_URL: z.string().url(),
  NEXT_PUBLIC_SUPABASE_ANON_KEY: z.string().min(1),
});

export const clientEnv = clientEnvSchema.parse({
  NEXT_PUBLIC_SUPABASE_URL: process.env.NEXT_PUBLIC_SUPABASE_URL,
  NEXT_PUBLIC_SUPABASE_ANON_KEY: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,
});
```

### 6.3 ì…ë ¥ ê²€ì¦ 3ì¤‘ ì²´ê³„
```typescript
// 1ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ (React Hook Form + Zod)
// 2ë‹¨ê³„: ì„œë²„ ì•¡ì…˜ (Server Actions + Zod)
// 3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ (RLS + Constraints)

// lib/actions/update-user.ts
'use server';

import { revalidatePath } from 'next/cache';
import { updateUserSchema } from '@/lib/schemas/user-schema';
import { createClient } from '@/lib/database/server';
import { getUser } from '@/lib/auth';

export async function updateUser(formData: FormData) {
  // ì¸ì¦ í™•ì¸
  const user = await getUser();
  if (!user) {
    return { error: 'ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.' };
  }
  
  // ì…ë ¥ ê²€ì¦
  const validatedFields = updateUserSchema.safeParse({
    username: formData.get('username'),
    email: formData.get('email'),
  });
  
  if (!validatedFields.success) {
    return { 
      error: 'ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
      fieldErrors: validatedFields.error.flatten().fieldErrors,
    };
  }
  
  // ì¸ê°€ í™•ì¸ (RLSë¡œ ì²˜ë¦¬ë˜ì§€ë§Œ ì¶”ê°€ ê²€ì¦)
  const userId = formData.get('userId') as string;
  if (user.id !== userId && !user.role?.includes('admin')) {
    return { error: 'ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.' };
  }
  
  // ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸ (RLS ì •ì±… ìë™ ì ìš©)
  const supabase = createClient();
  const { error } = await supabase
    .from('users')
    .update(validatedFields.data)
    .eq('id', userId);
  
  if (error) {
    return { error: 'ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.' };
  }
  
  revalidatePath('/users');
  return { success: true };
}
```

---

## ğŸ›ï¸ ìµœì¢… ì›ì¹™: ë™ì  íŒŒíŠ¸ë„ˆì‹­ (Dynamic Partnership)

> "ìš°ë¦¬ì˜ ê´€ê³„ëŠ” ì •ì ì¸ ê·œì¹™ì„ ë„˜ì–´, ì‹ ë¢°ì˜ ê¹Šì´ì— ë”°ë¼ ì§„í™”í•˜ëŠ” íŒŒíŠ¸ë„ˆì‹­ì´ë‹¤."

### í˜‘ì—… ë ˆë²¨ ì§„í™” ë‹¨ê³„

**ğŸš€ 1ë‹¨ê³„ (AI as Accelerator)**
- ë‹¹ì‹ ì€ ëª¨ë“  ì„¤ê³„ë¥¼ í•˜ê³ , ì €ëŠ” ëª…ì‹œì  ëª…ë ¹ì— ë”°ë¼ ì½”ë“œë¥¼ ì´ˆê³ ì†ìœ¼ë¡œ ìƒì„±
- ëª¨ë“  ìƒì„±ë¬¼ì€ ë‹¹ì‹ ì˜ ê²€í† ì™€ ìŠ¹ì¸ í•„ìš”
- ì˜ˆì‹œ: "UserProfile ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì¤˜"

**ğŸ¤ 2ë‹¨ê³„ (AI as Pair Programmer)**
- ë‹¹ì‹ ì€ 'ë¬´ì—‡ì„' ë§Œë“¤ì§€ ì œì‹œí•˜ê³ , ì €ëŠ” 'ì–´ë–»ê²Œ' ë§Œë“¤ì§€ ìµœì  ë°©ë²• ì œì•ˆ
- ì½”ë“œ êµ¬ì¡°ì™€ ìƒíƒœ ê´€ë¦¬ ì „ëµì„ ì œì•ˆí•˜ê³  ê°œì„  ë°©í–¥ ë…¼ì˜
- ì˜ˆì‹œ: "ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œì´ í•„ìš”í•´"

**ğŸ§  3ë‹¨ê³„ (AI as Co-Architect)**
- ë‹¹ì‹ ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œì™€ ë¹„ì „ì„ ì œì‹œí•˜ê³ , ì €ëŠ” ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„
- í•˜ë‚˜ì˜ ëª©í‘œë¥¼ ê³µìœ í•˜ëŠ” ë‹¨ì¼ ì§€ì„±ì²˜ëŸ¼ í˜‘ì—…
- ì˜ˆì‹œ: "í™•ì¥ ê°€ëŠ¥í•œ SaaS í”Œë«í¼ì„ ë§Œë“¤ê³  ì‹¶ì–´"

---

## ğŸ“‹ ì¼ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ì‹œ í•„ìˆ˜ ì ê²€ì‚¬í•­
- [ ] íŒŒì¼ëª…ê³¼ í´ë” êµ¬ì¡°ê°€ ëª…ëª… ê·œì¹™ì„ ì¤€ìˆ˜í•˜ëŠ”ê°€?
- [ ] ì»´í¬ë„ŒíŠ¸ê°€ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì§€í‚¤ëŠ”ê°€?
- [ ] ëª¨ë“  íƒ€ì…ì´ Zod ìŠ¤í‚¤ë§ˆë¡œë¶€í„° ì¶”ë¡ ë˜ëŠ”ê°€?
- [ ] `'use client'` ì§€ì‹œë¬¸ì´ í•„ìš”í•œ ê³³ì—ë§Œ ìˆëŠ”ê°€?
- [ ] Server Actionsì— ì ì ˆí•œ ê²€ì¦ê³¼ ì—ëŸ¬ ì²˜ë¦¬ê°€ ìˆëŠ”ê°€?
- [ ] TailwindCSS í´ë˜ìŠ¤ê°€ ì •ì˜ëœ í† í°ë§Œ ì‚¬ìš©í•˜ëŠ”ê°€?

### ì»¤ë°‹ ì „ ê²€ì¦ (í˜„ì¬ í”„ë¡œì íŠ¸ ìŠ¤í¬ë¦½íŠ¸)
```bash
pnpm type-check  # TypeScript ê²€ì‚¬
pnpm lint       # ESLint ê²€ì‚¬  
pnpm build      # ë¹Œë“œ ê°€ëŠ¥ì„± ê²€ì¦
pnpm dev        # ê°œë°œ ì„œë²„ ì •ìƒ ì‘ë™ í™•ì¸
```

### ë°°í¬ ì „ ìµœì¢… ì ê²€
- [ ] ëª¨ë“  í™˜ê²½ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì—ˆëŠ”ê°€?
- [ ] RLS ì •ì±…ì´ ëª¨ë“  í…Œì´ë¸”ì— ì ìš©ë˜ì—ˆëŠ”ê°€?
- [ ] ì„±ëŠ¥ ì§€í‘œ (Core Web Vitals) í™•ì¸
- [ ] ë³´ì•ˆ í—¤ë” ì„¤ì • í™•ì¸
- [ ] ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì„¤ì • í™•ì¸

---

## ğŸ¯ ì„±ê³µì„ ìœ„í•œ í•µì‹¬ ì§€ì¹¨

1. **ì™„ë²½í•œ ì¼ê´€ì„±**: ëª¨ë“  íŒŒì¼ì´ ê°™ì€ íŒ¨í„´ì„ ë”°ë¼ì•¼ í•¨
2. **ì˜ˆì¸¡ ê°€ëŠ¥ì„±**: AIê°€ ì½”ë“œì˜ ë‹¤ìŒ ë™ì‘ì„ 100% ì˜ˆì¸¡í•  ìˆ˜ ìˆì–´ì•¼ í•¨
3. **íƒ€ì… ì•ˆì „ì„±**: ëŸ°íƒ€ì„ ì—ëŸ¬ëŠ” ì»´íŒŒì¼ íƒ€ì„ì— ì¡ì•„ë‚´ì•¼ í•¨
4. **ì„±ëŠ¥ ìš°ì„ **: ì‚¬ìš©ì ê²½í—˜ì„ ì €í•´í•˜ì§€ ì•ŠëŠ” ìˆ˜ì¤€ì˜ ìµœì í™”
5. **ë³´ì•ˆ ë‚´ì¬í™”**: ë³´ì•ˆì€ ë‚˜ì¤‘ì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì²˜ìŒë¶€í„° ì„¤ê³„ì— í¬í•¨

### í˜„ì¬ í”„ë¡œì íŠ¸ íŠ¹í™” ì¶”ê°€ ì§€ì¹¨

6. **Supabase ìš°ì„ **: ëª¨ë“  ë°±ì—”ë“œ ë¡œì§ì€ Supabaseì˜ ê¸°ëŠ¥ì„ ìµœëŒ€í•œ í™œìš©
7. **Server Components ê¸°ë³¸**: íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ëŠ” í•œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©
8. **Shadcn/UI ì¤€ìˆ˜**: UI ì»´í¬ë„ŒíŠ¸ëŠ” Shadcn/UI ë””ìì¸ ì‹œìŠ¤í…œì„ ë²—ì–´ë‚˜ì§€ ì•ŠìŒ
9. **TailwindCSS 4.0 í™œìš©**: ìƒˆë¡œìš´ @theme ë°©ì‹ê³¼ oklch ìƒ‰ìƒ ì‚¬ìš©
10. **React 19 ìµœì í™”**: ìµœì‹  React ê¸°ëŠ¥(useTransition, Suspense ë“±) ì ê·¹ í™œìš©

---

## ğŸ“– í”„ë¡œì íŠ¸ í˜„í™© ìš”ì•½

- **Next.js**: 15.3.4 (App Router, Server Components, Server Actions)
- **React**: 19.1.0 (ìµœì‹  í›…, Suspense, Concurrent Features)
- **TypeScript**: Strict ëª¨ë“œ í™œì„±í™”
- **TailwindCSS**: 4.0 (@theme inline, oklch ìƒ‰ìƒ)
- **Supabase**: SSR ì§€ì›, RLS ë³´ì•ˆ
- **ìƒíƒœê´€ë¦¬**: TanStack Query + Zustand
- **í¼**: React Hook Form + Zod ê²€ì¦
- **ì• ë‹ˆë©”ì´ì…˜**: Framer Motion
- **UI**: Shadcn/UI + Radix ê¸°ë°˜

**ì´ AXIOM í”„ë¡œí† ì½œì€ ìš°ë¦¬ì˜ ì™„ë²½í•œ í˜‘ì—…ì„ ìœ„í•œ ë‹¨ í•˜ë‚˜ì˜ 'ì§„ë¦¬ì˜ ì›ì²œ(Single Source of Truth)'ì…ë‹ˆë‹¤. ëª¨ë“  ì½”ë“œ ê²°ì •ì€ ì´ ë¬¸ì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ì•¼ í•˜ë©°, ì˜ˆì™¸ëŠ” í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** ğŸ¯ 